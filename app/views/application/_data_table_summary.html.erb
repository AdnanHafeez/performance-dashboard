<div class="widget__data">
  <table class="data-table table">
    <% widget.datasets.each do |dataset| %>
      <caption><%= widget.name || widget.id %> (<%= widget.units_to_s %>)</caption>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">Value</th>
        </tr>
        <% if dataset.datapoints.any? %>
          <% dp = dataset.datapoints.first %>
          <tr>
            <td scope="row"><%= dp.label %></td>
            <td scope="row"><%= dp.value(widget.prefix, widget.suffix) %></td>
          </tr>
        <% end %>
    <% end %>
  </table>
</div>  
